@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* HTML & Scroll */
  html {
    overflow-x: hidden;
    /* Hide scrollbars in modern browsers */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge Legacy */
  }

  html::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  /* Desktop: no scroll-behavior (section navigation) */
  @media (min-width: 1280px) {
    html {
      scroll-behavior: auto;
    }
  }

  /* Mobile/Tablets: smooth native scroll and ensure touch behavior */
  @media (max-width: 1279px) {
    html {
      scroll-behavior: smooth;
      overflow-y: auto;
      touch-action: pan-y;
      height: auto;
      min-height: 100%;
    }

    body {
      overflow-y: auto;
      overflow-x: hidden;
      height: auto;
      min-height: 100%;
      position: relative; /* Ensure stacking context */
    }
  }

  /* CSS Variables - Light Theme (based on #111827, #626c7d, #599692, #dfe5ec) */
  :root {
    /* Main background: light blue-grey #dfe5ec for a usable light mode */
    --background: 216 23% 89%; /* #DFE5EC */
    /* Headings and strong text: very dark blue close to #111827 */
    --foreground: 222 47% 16%; /* approx #111827 */
    /* Cards: slightly lighter than background */
    --card: 216 23% 96%;
    --card-foreground: 222 47% 16%;
    --popover: 216 23% 96%;
    --popover-foreground: 222 47% 16%;
    /* Primary accent: pastel green #599692 */
    --primary: 174 25% 48%;
    --primary-foreground: 210 40% 98%;
    /* Secondary accent: lighter shade of the same green */
    --secondary: 174 25% 60%;
    --secondary-foreground: 222 47% 16%;
    /* Muted text: same color as main text to unify copy */
    --muted: 216 23% 94%;
    --muted-foreground: 222 47% 16%;
    /* Default accent: pastel green */
    --accent: 174 25% 48%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 98%;
    /* Borders / separators: soft grey close to #cbd5e1 */
    --border: 214 32% 85%;
    --input: 214 32% 85%;
    --ring: 174 25% 48%;
    /* Chart and sidebar values */
    --chart-1: 174 25% 48%;
    --chart-2: 219 12% 43%;
    --chart-3: 222 47% 16%;
    --chart-4: 216 23% 89%;
    --chart-5: 210 40% 96%;
    --sidebar-background: 216 23% 94%;
    --sidebar-foreground: 222 47% 16%;
    --sidebar-primary: 174 25% 48%;
    --sidebar-primary-foreground: 210 40% 98%;
    --sidebar-accent: 219 12% 43%;
    --sidebar-accent-foreground: 222 47% 16%;
    --sidebar-border: 214 32% 85%;
    --sidebar-ring: 174 25% 48%;
  }

  /* CSS Variables - Dark Theme (based on #0d0f12, #c7cacc, #c91b68, #809fff) */
  .dark {
    /* Main dark background: #0d0f12 */
    --background: 222 19% 6%;
    /* Main and secondary text: medium-light grey #c7cacc */
    --foreground: 210 6% 79%;
    --muted-foreground: 210 6% 79%; /* same as --foreground */
    /* Cards: slightly lighter than background, using #111827 as elevated surface */
    --card: 222 31% 13%; /* approx #111827 */
    --card-foreground: 210 6% 79%;
    --popover: 222 31% 13%;
    --popover-foreground: 210 6% 79%;
    /* Primary accent: pastel green #599692 (same tone as light theme) */
    --primary: 174 25% 48%; /* â‰ˆ #599692 */
    --primary-foreground: 222 19% 6%;
    /* Secondary accent / hover: lighter variant of the same green */
    --secondary: 174 25% 60%;
    --secondary-foreground: 222 19% 6%;
    /* Muted text: same text color to unify copy */
    --muted: 222 24% 16%;
    --muted-foreground: 210 6% 79%;
    /* Default accent: same primary green */
    --accent: 174 25% 48%;
    --accent-foreground: 222 19% 6%;
    --destructive: 0 62% 40%;
    --destructive-foreground: 0 0% 98%;
    /* Dark borders / inputs derived from background */
    --border: 222 24% 16%;
    --input: 222 24% 16%;
    --ring: 174 25% 48%;
  }

  /* Global Border Color */
  * {
    border-color: hsl(var(--border));
  }

  /* Body Styles */
  body {
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
    color: hsl(var(--foreground));
    /* Light background based on #dfe5ec with soft blur effect */
    background-color: #dfe5ec;
    background-image: radial-gradient(
        circle at 0% 0%,
        hsl(var(--primary) / 0.18) 0%,
        transparent 45%
      ),
      radial-gradient(
        circle at 100% 0%,
        hsl(var(--primary) / 0.18) 0%,
        transparent 45%
      ),
      radial-gradient(circle at 0% 100%, #e4e4e4 0%, transparent 45%),
      radial-gradient(circle at 100% 100%, #e4e4e4 0%, transparent 45%);
    background-attachment: fixed;
  }

  @media (max-width: 1279px) {
    body {
      background-attachment: scroll;
    }
  }

  body::-webkit-scrollbar {
    display: none;
  }

  .dark body {
    /* Dark background based on #0d0f12 with slightly bluish accents */
    background-color: #0d0f12;
    background-image: radial-gradient(
        circle at 0% 0%,
        #111827 0%,
        transparent 55%
      ),
      radial-gradient(circle at 100% 0%, #111827 0%, transparent 55%),
      radial-gradient(circle at 0% 100%, #020617 0%, transparent 55%),
      radial-gradient(circle at 100% 100%, #020617 0%, transparent 55%);
    background-attachment: fixed;
  }

  /* Selection Styles */
  ::selection {
    background-color: hsl(var(--foreground));
    color: hsl(var(--background));
  }

  .dark ::selection {
    background-color: hsl(var(--foreground));
    color: hsl(var(--background));
  }

  /* Hamburger Menu Styles */
  .hamburger,
  .swap {
    cursor: pointer;
  }

  .hamburger input {
    display: none;
  }

  .hamburger svg {
    height: 2.25em;
    transition: transform 600ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hamburger .line {
    fill: none;
    stroke: hsl(var(--foreground));
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 2.5;
    transition: stroke-dasharray 600ms cubic-bezier(0.4, 0, 0.2, 1),
      stroke-dashoffset 600ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hamburger .line-top-bottom {
    stroke-dasharray: 12 63;
  }

  .hamburger input:checked + svg {
    transform: rotate(-45deg);
  }

  .hamburger input:checked + svg .line-top-bottom {
    stroke-dasharray: 20 300;
    stroke-dashoffset: -32.42;
  }

  /* Code Cube Face Styles */
  .code-cube-face pre {
    font-family: monospace;
    font-size: 9px;
    line-height: 1.25;
    text-align: left;
    background-color: #1e1e1e;
    color: #ffffff;
    padding: 0.5rem;
    border-radius: 0.375rem;
    overflow: hidden;
  }

  .code-cube-face .token-tag {
    color: #569cd6;
  }

  .code-cube-face .token-attr-name {
    color: #9cdcfe;
  }

  .code-cube-face .token-attr-value {
    color: #ce9178;
  }

  .code-cube-face .token-punctuation {
    color: #ffffff;
  }

  .code-cube-face .token-selector {
    color: #d7ba7d;
  }

  .code-cube-face .token-property {
    color: #9cdcfe;
  }

  .code-cube-face .token-function {
    color: #dcdcaa;
  }

  .code-cube-face .token-keyword {
    color: #c586c0;
  }

  .code-cube-face .token-comment {
    color: rgb(34 197 94); /* green-500 */
  }
}

@layer utilities {
  .animate-pulse-slow {
    animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  @keyframes pulse {
    50% {
      opacity: 0.5;
    }
  }
  .swap {
    @apply relative inline-grid select-none;
    place-content: center;
  }
  .swap > * {
    @apply col-start-1 row-start-1;
  }
  .swap input {
    @apply absolute appearance-none;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }
  .swap .swap-on,
  .swap .swap-off {
    @apply transition-transform duration-300 ease-in-out;
  }

  .swap .swap-off {
    transform-origin: 50% 50%;
  }
  .swap input:not(:checked) + .swap-on {
    @apply opacity-0 -rotate-45;
  }
  .swap input:checked + .swap-on {
    @apply opacity-100 rotate-0;
  }

  .swap input:checked ~ .swap-off {
    @apply opacity-0 rotate-45;
  }

  .swap-rotate input:not(:checked) + .swap-on {
    transform: rotate(45deg);
  }

  .animate-text-gradient {
    background: linear-gradient(
      -45deg,
      hsl(var(--accent)),
      hsl(var(--primary)),
      hsl(var(--accent))
    );
    background-size: 300%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: text-gradient 8s ease-in-out infinite;
  }

  /* Keyframes defined in tailwind.config.ts */

  /* ========================================================================= */
  /* COMPONENT STYLES - Consolidated to eliminate render-blocking CSS chunks */
  /* ========================================================================= */

  /* Loader Component */
  .loader-container {
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 50;
  }

  .loader {
    position: relative;
    width: 11.25rem;
    height: 5rem;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
  }

  .loader span {
    display: block;
    width: 0.375rem;
    height: 18%;
    border-radius: 999px;
    background: linear-gradient(
      180deg,
      hsla(var(--primary) / 0.95),
      hsla(var(--primary) / 0.45)
    );
    transform-origin: 50% 100%;
    animation: loaderWave 1.6s ease-in-out infinite;
    will-change: transform, opacity;
  }

  .dark .loader span {
    background: linear-gradient(
      180deg,
      hsla(var(--primary) / 0.9),
      hsla(var(--primary) / 0.5)
    );
  }

  .loader span:nth-child(1) {
    animation-delay: 0s;
    height: 26%;
  }
  .loader span:nth-child(2) {
    animation-delay: 0.05s;
    height: 32%;
  }
  .loader span:nth-child(3) {
    animation-delay: 0.1s;
    height: 38%;
  }
  .loader span:nth-child(4) {
    animation-delay: 0.15s;
    height: 46%;
  }
  .loader span:nth-child(5) {
    animation-delay: 0.2s;
    height: 54%;
  }
  .loader span:nth-child(6) {
    animation-delay: 0.25s;
    height: 62%;
  }
  .loader span:nth-child(7) {
    animation-delay: 0.3s;
    height: 70%;
  }
  .loader span:nth-child(8) {
    animation-delay: 0.35s;
    height: 76%;
  }
  .loader span:nth-child(9) {
    animation-delay: 0.4s;
    height: 70%;
  }
  .loader span:nth-child(10) {
    animation-delay: 0.45s;
    height: 62%;
  }
  .loader span:nth-child(11) {
    animation-delay: 0.5s;
    height: 54%;
  }
  .loader span:nth-child(12) {
    animation-delay: 0.55s;
    height: 46%;
  }
  .loader span:nth-child(13) {
    animation-delay: 0.6s;
    height: 38%;
  }
  .loader span:nth-child(14) {
    animation-delay: 0.65s;
    height: 32%;
  }
  .loader span:nth-child(15) {
    animation-delay: 0.7s;
    height: 26%;
  }

  @keyframes loaderWave {
    0% {
      transform: translateY(0) scaleY(0.5);
      opacity: 0.5;
    }
    35% {
      transform: translateY(-0.375rem) scaleY(1);
      opacity: 1;
    }
    70% {
      transform: translateY(0) scaleY(0.7);
      opacity: 0.85;
    }
    100% {
      transform: translateY(0) scaleY(0.5);
      opacity: 0.5;
    }
  }

  /* Scroll Down Indicator */
  .scrolldown {
    --color: #5c9993;
    --sizeX: 24px;
    --sizeY: 40px;
    position: relative;
    width: var(--sizeX);
    height: var(--sizeY);
    border: calc(var(--sizeX) / 10) solid var(--color);
    border-radius: 50px;
    box-sizing: border-box;
    cursor: pointer;
    transform: scale(clamp(1, 0.05vw, 1.5));
    transform-origin: center;
  }

  .dark .scrolldown {
    --color: #599692;
  }

  .scrolldown::before {
    content: "";
    position: absolute;
    bottom: 24px;
    left: 50%;
    width: 5px;
    height: 5px;
    margin-left: -2.5px;
    background-color: var(--color);
    border-radius: 100%;
    animation: scrolldown-anim 2s infinite;
    box-sizing: border-box;
    transform-origin: center top;
    will-change: transform, opacity;
  }

  @keyframes scrolldown-anim {
    0% {
      opacity: 0;
      transform: scaleY(1);
    }
    40% {
      opacity: 1;
      transform: scaleY(1.6);
    }
    80% {
      transform: translateY(15px) scaleY(1.6);
      opacity: 0;
    }
    100% {
      transform: translateY(15px) scaleY(0.6);
      opacity: 0;
    }
  }

  .chevrons {
    padding: 6px 0 0 0;
    margin-left: -3px;
    margin-top: 38px;
    width: 24px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .chevrondown {
    margin-top: -6px;
    position: relative;
    border: solid var(--color);
    border-width: 0 2.5px 2.5px 0;
    display: inline-block;
    width: 8px;
    height: 8px;
    transform: rotate(45deg);
  }

  .chevrondown:nth-child(odd) {
    animation: pulse54012 500ms ease infinite alternate;
  }
  .chevrondown:nth-child(even) {
    animation: pulse54012 500ms ease infinite alternate 250ms;
  }

  @keyframes pulse54012 {
    from {
      opacity: 0;
    }
    to {
      opacity: 0.5;
    }
  }

  /* CTA Button */
  .cta {
    border: none;
    background: none;
    cursor: pointer;
    display: flex;
    align-items: center;
  }

  .cta span {
    padding-bottom: 2px;
    letter-spacing: 2px;
    font-size: 12px;
    padding-right: 15px;
    text-transform: uppercase;
  }

  .cta svg {
    transform: translateX(-8px);
    transition: all 0.3s ease;
    fill: currentColor;
  }

  @media (min-width: 768px) {
    .cta:hover svg {
      transform: translateX(0);
    }
  }

  .cta:active svg {
    transform: scale(0.9);
  }

  .hover-underline-animation {
    position: relative;
    padding-bottom: 2px;
  }

  .hover-underline-animation:after {
    content: "";
    position: absolute;
    width: 100%;
    transform: scaleX(0);
    height: 2px;
    bottom: 0;
    left: 0;
    background-color: currentColor;
    transform-origin: bottom right;
    transition: transform 0.25s ease-out;
  }

  @media (min-width: 768px) {
    .cta:hover .hover-underline-animation:after {
      transform: scaleX(1);
      transform-origin: bottom left;
    }
  }

  /* Send Button Component */
  .send-button-component {
    --primary-color: hsl(var(--primary));
    --text-color-light: hsl(var(--foreground));
    --text-color-dark: hsl(var(--foreground));
    cursor: pointer;
    border-radius: 12px;
    border: 1px solid transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: background-color 0.3s ease;
    width: clamp(140px, 40vw, 200px);
    padding: clamp(9px, 2.2vw, 13px) clamp(18px, 4.2vw, 26px);
    height: clamp(40px, 7.5vw, 52px);
    font-family: inherit;
    font-style: normal;
    font-size: clamp(14px, 2.6vw, 16px);
    font-weight: 500;
    margin-top: 0.2rem;
    background-color: hsla(var(--primary) / 0.12);
    color: var(--text-color-light);
    border-color: hsla(var(--primary) / 0.3);
  }

  .send-button-component:not(:disabled):hover {
    background-color: hsla(var(--primary) / 0.12);
  }

  .dark .send-button-component {
    background-color: #599692;
    color: hsl(var(--foreground));
    border-color: transparent;
  }

  .dark .send-button-component:not(:disabled):hover {
    background-color: #599692;
  }

  .send-button-component:disabled {
    cursor: not-allowed;
    opacity: 0.7;
  }

  .send-button-component:active {
    transform: scale(0.98);
  }

  .state p {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .state .icon {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    margin: auto;
    transform: scale(1.1);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .state .icon svg {
    overflow: visible;
  }

  .state p span {
    display: block;
    opacity: 0;
    animation: slideDown 0.8s ease forwards calc(var(--i) * 0.03s);
  }

  .send-button-component:not(:disabled):hover p span {
    opacity: 1;
    animation: wave 0.5s ease forwards calc(var(--i) * 0.02s);
  }

  .send-button-component.is-sending .state--default p span {
    opacity: 1;
    animation: disapear 0.6s ease forwards calc(var(--i) * 0.03s);
  }

  @keyframes wave {
    30% {
      opacity: 1;
      transform: translateY(4px) translateX(0) rotate(0);
    }
    50% {
      opacity: 1;
      transform: translateY(-3px) translateX(0) rotate(0);
    }
    100% {
      opacity: 1;
      transform: translateY(0) translateX(0) rotate(0);
    }
  }

  body:not(.dark) .send-button-component:not(:disabled):hover p span {
    color: var(--text-color-light);
  }

  .dark .send-button-component:not(:disabled):hover p span {
    color: var(--primary-color);
  }

  @keyframes slideDown {
    0% {
      opacity: 0;
      transform: translateY(-20px) translateX(5px) rotate(-90deg);
      filter: blur(5px);
    }
    30% {
      opacity: 1;
      transform: translateY(4px) translateX(0) rotate(0);
      filter: blur(0);
    }
    50% {
      opacity: 1;
      transform: translateY(-3px) translateX(0) rotate(0);
    }
    100% {
      opacity: 1;
      transform: translateY(0) translateX(0) rotate(0);
    }
  }

  body:not(.dark) .state p span {
    color: var(--text-color-light);
  }

  .dark .state p span {
    color: var(--text-color-dark);
  }

  @keyframes disapear {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
      transform: translateX(5px) translateY(20px);
      filter: blur(5px);
    }
  }

  .state--default .icon svg {
    animation: land 0.6s ease forwards;
  }

  .send-button-component:not(:disabled):hover .state--default .icon {
    transform: rotate(45deg) scale(1.25);
  }

  .send-button-component.is-sending .state--default svg {
    animation: takeOff 0.8s linear forwards;
  }

  .send-button-component.is-sending .state--default .icon {
    transform: rotate(0) scale(1.25);
  }

  @keyframes takeOff {
    0% {
      opacity: 1;
    }
    60% {
      opacity: 1;
      transform: translateX(70px) rotate(45deg) scale(2);
    }
    100% {
      opacity: 0;
      transform: translateX(160px) rotate(45deg) scale(0);
    }
  }

  @keyframes land {
    0% {
      transform: translateX(-60px) translateY(30px) rotate(-50deg) scale(2);
      opacity: 0;
      filter: blur(3px);
    }
    100% {
      transform: translateX(0) translateY(0) rotate(0);
      opacity: 1;
      filter: blur(0);
    }
  }

  .state--default .icon:before {
    content: "";
    position: absolute;
    top: 50%;
    height: 2px;
    width: 0;
    left: -5px;
  }

  body:not(.dark) .state--default .icon:before {
    background: linear-gradient(
      to right,
      transparent,
      hsla(var(--muted-foreground) / 0.5)
    );
  }

  .dark .state--default .icon:before {
    background: linear-gradient(
      to right,
      transparent,
      hsla(var(--primary-foreground) / 0.5)
    );
  }

  .send-button-component.is-sending .state--default .icon:before {
    animation: contrail 0.8s linear forwards;
  }

  @keyframes contrail {
    0% {
      width: 0;
      opacity: 1;
    }
    8% {
      width: 15px;
    }
    60% {
      opacity: 0.7;
      width: 80px;
    }
    100% {
      opacity: 0;
      width: 160px;
    }
  }

  .state {
    padding-left: 24px;
    z-index: 2;
    display: flex;
    position: relative;
  }

  .state--default {
    display: flex;
  }

  .send-button-component.is-sending .state--default {
    animation: hideAfterTakeoff 0.8s forwards;
    display: flex;
    position: absolute;
  }

  @keyframes hideAfterTakeoff {
    0%,
    99% {
      opacity: 1;
      visibility: visible;
    }
    100% {
      opacity: 0;
      visibility: hidden;
    }
  }

  .state--sent {
    display: none;
  }

  .send-button-component.is-sending .state--sent {
    display: flex;
    opacity: 0;
    animation: showAfterTakeoff 0.1s 0.8s forwards;
  }

  @keyframes showAfterTakeoff {
    to {
      opacity: 1;
    }
  }

  .state--sent svg {
    transform: scale(1.1);
    margin-right: 6px;
  }

  .send-button-component.is-sending .state--sent span {
    opacity: 0;
    animation: slideDown 0.8s ease forwards calc(var(--i) * 0.2s);
  }

  .send-button-component.is-sending .state--sent .icon svg {
    opacity: 0;
    animation: appear 1.2s ease forwards 0.8s;
  }

  @keyframes appear {
    0% {
      opacity: 0;
      transform: scale(4) rotate(-40deg);
      filter: blur(4px);
    }
    30% {
      opacity: 1;
      transform: scale(0.6);
      filter: blur(1px);
    }
    50% {
      opacity: 1;
      transform: scale(1.2);
      filter: blur(0);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  body:not(.dark) .send-button-component.is-sending .state--sent .icon svg {
    color: var(--text-color-light);
  }

  .dark .send-button-component.is-sending .state--sent .icon svg {
    color: var(--text-color-dark);
  }

  /* Respect user preference for reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .scrolldown::before,
    .chevrondown {
      animation: none !important;
      transition: none !important;
    }
  }
}
